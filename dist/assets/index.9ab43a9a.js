var q=Object.defineProperty,B=Object.defineProperties;var H=Object.getOwnPropertyDescriptors;var x=Object.getOwnPropertySymbols;var M=Object.prototype.hasOwnProperty,J=Object.prototype.propertyIsEnumerable;var $=(e,t,n)=>t in e?q(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,f=(e,t)=>{for(var n in t||(t={}))M.call(t,n)&&$(e,n,t[n]);if(x)for(var n of x(t))J.call(t,n)&&$(e,n,t[n]);return e},v=(e,t)=>B(e,H(t));import{a as K,r as h,u as w,b as O,j as c,c as s,g as R,F as z,d as S,e as F,h as U,f as Q,o as V,L as E,R as W,i as T,k as X,l as Z,m as I,n as ee,p as te,q as ne,B as se,P as ae,t as oe}from"./vendor.fa18889a.js";const ie=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))a(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&a(l)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerpolicy&&(o.referrerPolicy=i.referrerpolicy),i.crossorigin==="use-credentials"?o.credentials="include":i.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function a(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}};ie();const re="_signin_1bg77_3",ce="_signin__title_1bg77_25",le="_signin__credential_cont_1bg77_51",_e="_signin__submit_1bg77_75",ue="_signin__google_login_btn_1bg77_95",de="_signin__switch_btn_1bg77_123";var N={signin:re,signin__title:ce,signin__credential_cont:le,signin__submit:_e,signin__google_login_btn:ue,signin__switch_btn:de};const b=K.create({baseURL:"https://slido-backend.herokuapp.com"});b.interceptors.request.use(e=>{const t=JSON.parse(localStorage.getItem("profile"));return t&&(e.headers.authorization=`Bearer ${t.token}`),e});const pe=()=>b.get("/posts"),ge=e=>b.post("/posts",e),me=(e,t)=>b.patch(`/posts/${e}`,t),he=e=>b.delete(`/posts/${e}`),fe=e=>b.patch(`/posts/${e}/likePost`),ve=e=>b.post("/users/signin",e),ye=e=>b.post("/users/signup",e),j="CREATE",C="UPDATE",Y="FETCH_ALL",G="DELETE",P="AUTH",be="LOGOUT",Ne=(e,t)=>async n=>{try{const{data:a}=await ve(e);n({type:P,data:a}),t("/")}catch(a){console.log(a)}},we=(e,t)=>async n=>{try{const{data:a}=await ye(e);n({type:P,data:a}),t("/")}catch(a){console.log(a)}},Se=({googleSuccess:e,googleFailure:t,setIsSignIn:n,isSignIn:a})=>{const i={email:"",password:""},[o,l]=h.exports.useState(i),p=w(),u=O(),d=r=>{r.preventDefault(),p(Ne(o,u))},_=r=>{const{name:g,value:m}=r.target;l(v(f({},o),{[g]:m}))};return c("div",{className:N.signin,children:[s("div",{className:N.signin__title,children:s("h2",{children:"Sign In"})}),c("form",{onSubmit:d,children:[c("div",{className:N.signin__credential_cont,children:[s("input",{type:"email",name:"email",onChange:_,value:o.email,placeholder:"Enter Your Email"}),s("input",{type:"password",name:"password",onChange:_,value:o.password,placeholder:"Enter Your Password"})]}),s("div",{className:N.signin__submit,children:s("input",{type:"submit",value:"Sign In"})})]}),s("div",{className:N.signin__google_login_btn,children:s(R.exports.GoogleLogin,{clientId:"57068600894-v6tcaldjjil72rhu7epl2ts8dnn2gid2.apps.googleusercontent.com",render:r=>c("button",{onClick:r.onClick,disabled:r.disabled,children:[s("i",{className:"fab fa-google"})," Google Login"]}),onSuccess:e,onFailure:t,cookiePolicy:"single_host_origin"})}),s("div",{className:N.signin__switch_btn,children:s("button",{onClick:()=>n(!a),children:a?"You don't have an account? Signup":"Already have an account? Login"})})]})},ke="_signup_1l0fg_3",Ee="_signup__title_1l0fg_27",Le="_signup__name_1l0fg_55",Ce="_signup__email_1l0fg_75",Pe="_signup__password_1l0fg_91",xe="_signup__image_file_1l0fg_109",$e="_signup__submit_1l0fg_123",Te="_signup__google_login_btn_1l0fg_139",Ae="_signup__switch_btn_1l0fg_167";var y={signup:ke,signup__title:Ee,signup__name:Le,signup__email:Ce,signup__password:Pe,signup__image_file:xe,signup__submit:$e,signup__google_login_btn:Te,signup__switch_btn:Ae};const De=({googleSuccess:e,googleFailure:t,setIsSignIn:n,isSignIn:a})=>{const i={first_name:"",last_name:"",email:"",password:"",confirm_password:"",selectedFile:""},[o,l]=h.exports.useState(i),p=w(),u=O(),d=r=>{r.preventDefault(),p(we(o,u))},_=r=>{const{name:g,value:m}=r.target;l(v(f({},o),{[g]:m}))};return c("div",{className:y.signup,children:[s("div",{className:y.signup__title,children:s("h2",{children:"Sign Up"})}),c("form",{onSubmit:d,children:[c("div",{className:y.signup__name,children:[s("input",{type:"text",name:"first_name",onChange:_,value:o.first_name,placeholder:"Enter Your First Name"}),s("input",{type:"text",name:"last_name",onChange:_,value:o.last_name,placeholder:"Enter Your Last Name"})]}),s("div",{className:y.signup__email,children:s("input",{type:"email",name:"email",onChange:_,value:o.email,placeholder:"Enter Your Email"})}),c("div",{className:y.signup__password,children:[s("input",{type:"password",name:"password",onChange:_,value:o.password,placeholder:"Enter Your Password"}),s("input",{type:"password",name:"confirm_password",onChange:_,value:o.confirm_password,placeholder:"Confirm Password"})]}),s("div",{className:y.signup__image_file,children:s(z,{type:"file",multiple:!1,onDone:({base64:r})=>l(v(f({},o),{selectedFile:r}))})}),s("div",{className:y.signup__submit,children:s("input",{type:"submit",value:"Sign Up"})})]}),s("div",{className:y.signup__google_login_btn,children:s(R.exports.GoogleLogin,{clientId:"57068600894-v6tcaldjjil72rhu7epl2ts8dnn2gid2.apps.googleusercontent.com",render:r=>c("button",{onClick:r.onClick,disabled:r.disabled,children:[s("i",{className:"fab fa-google"})," Google Login"]}),onSuccess:e,onFailure:t,cookiePolicy:"single_host_origin"})}),s("div",{className:y.signup__switch_btn,children:s("button",{onClick:()=>n(!a),children:a?"You don't have an account? Signup":"Already have an account? Login"})})]})},Oe="_auth_dboim_3";var Re={auth:Oe};const Fe=()=>{const[e,t]=h.exports.useState(!1);return s("div",{className:Re.auth,children:e?s(Se,{setIsSignIn:t,isSignIn:e}):s(De,{setIsSignIn:t,isSignIn:e})})},je="_form_sloir_3",Ye="_form__info_sloir_73";var A={form:je,form__info:Ye};const Ge=()=>async e=>{try{const{data:t}=await pe();e({type:Y,payload:t})}catch(t){console.log(t)}},qe=e=>async t=>{try{const{data:n}=await ge(e);t({type:j,payload:n})}catch(n){console.log(n)}},Be=(e,t)=>async n=>{try{const{data:a}=await me(e,t);n({type:C,payload:a})}catch(a){console.log(a)}},He=e=>async t=>{try{await he(e),t({type:G,payload:e})}catch(n){console.log(n)}},D=e=>async t=>{try{const{data:n}=await fe(e);t({type:C,payload:n})}catch(n){console.log(n)}},Me=({currentId:e,setCurrentId:t})=>{var _;const n=S(r=>r.auth),a={message:"",tags:""},[i,o]=h.exports.useState(a),l=w(),p=S(r=>e?r.posts.find(g=>g._id===e):null);h.exports.useEffect(()=>{p&&o(p)},[p]);const u=r=>{let{name:g,value:m}=r.target;g=="tags"&&(m=m.split(",")),o(v(f({},i),{[g]:m}))},d=r=>{var g,m;r.preventDefault(),l(e?Be(e,v(f({},i),{name:(g=n==null?void 0:n.user)==null?void 0:g.name})):qe(v(f({},i),{name:(m=n==null?void 0:n.user)==null?void 0:m.name}))),o(a),t(null)};return s(F,{children:(_=n==null?void 0:n.user)!=null&&_.name?c("div",{className:A.form,children:[c("h2",{children:[" ",e?"Updating":"Creating"," a post"]}),c("form",{onSubmit:d,children:[s("input",{type:"text",name:"tags",placeholder:"Tags put , for multiple tags",value:i.tags,onChange:u}),s("textarea",{name:"message",placeholder:"Type your question here",cols:"10",rows:"10",value:i.message,onChange:u}),s("input",{type:"submit",value:"Submit"})]})]}):s("div",{className:A.form__info,children:s("p",{children:"Please Sign In to post your question and like others questions"})})})},Je="_container_321jt_3";var Ke={container:Je};const ze="_post_14ewn_3",Ue="_post__more_14ewn_29";var k={post:ze,post__more:Ue};const Qe=({el:e,handleUpdate:t})=>{var o,l,p,u;const n=S(d=>d.auth),a=w(),i=()=>(e.likes.find(d=>{var _,r;return d!==((_=n==null?void 0:n.user)==null?void 0:_._id)||((r=n==null?void 0:n.user)==null?void 0:r.googleId)}),s(F,{children:e.likes.find(d=>{var _,r;return d===(((_=n==null?void 0:n.user)==null?void 0:_.googleId)||((r=n==null?void 0:n.user)==null?void 0:r._id))})?c("span",{onClick:()=>a(D(e._id)),children:[s("i",{className:"fas fa-thumbs-up"})," LIKE ",e.likes.length]}):c("span",{onClick:()=>a(D(e._id)),children:[s("i",{className:"far fa-thumbs-up"})," LIKE ",e.likes.length||""]})}));return c("div",{className:k.post,children:[c("div",{className:k.post__more,children:[s("p",{children:e.name}),s("p",{children:e.tags.map(d=>`#${d} `)}),s("p",{children:U(e.createdAt).fromNow()})]}),s("p",{children:e.message}),c("div",{className:k.post__more,children:[(n==null?void 0:n.token)&&s(i,{}),(((o=n==null?void 0:n.user)==null?void 0:o.googleId)===(e==null?void 0:e.creator)||((l=n==null?void 0:n.user)==null?void 0:l._id)===(e==null?void 0:e.creator))&&c("span",{onClick:()=>a(He(e._id)),children:[s("i",{className:"fas fa-trash"})," DELETE"]}),(((p=n==null?void 0:n.user)==null?void 0:p.googleId)===(e==null?void 0:e.creator)||((u=n==null?void 0:n.user)==null?void 0:u._id)===(e==null?void 0:e.creator))&&s("span",{className:k.post__image_right,children:s("i",{className:"fas fa-edit",onClick:()=>t(e._id)})})]})]})},Ve=({handleUpdate:e})=>{const t=S(a=>a.posts),n=w();return h.exports.useEffect(()=>{n(Ge())},[]),t!=null&&t.length?s("div",{className:Ke.container,children:t.map(a=>s(Qe,{el:a,handleUpdate:e},a._id))}):s("i",{className:"fas fa-spinner"})},We="_container_dpxx7_5";var Xe={container:We};const Ze=()=>{const[e,t]=h.exports.useState(null);function n(a){t(a)}return h.exports.useEffect(()=>{},[]),c("div",{className:Xe.container,children:[s(Ve,{handleUpdate:n}),s(Me,{currentId:e,setCurrentId:t})]})},Ie="_navbar_170k8_3",et="_navbar__login_170k8_37",tt="_navbar__logout_170k8_87";var L={navbar:Ie,navbar__login:et,navbar__logout:tt};const nt=()=>{var l,p;const e=S(u=>u.auth),[t,n]=h.exports.useState(e),a=w(),i=Q();h.exports.useEffect(()=>{const u=t==null?void 0:t.token;u&&V(u).exp*1e3<new Date().getTime()&&o(),n(e)},[i]);const o=()=>{a({type:"LOGOUT"})};return c("div",{className:L.navbar,children:[s(E,{to:"/",children:s("h1",{children:"Slido"})}),t!=null&&t.token?c("div",{className:L.navbar__login,children:[s("img",{src:(l=t==null?void 0:t.user)==null?void 0:l.imageUrl,alt:t.user.name[0]}),s("p",{children:(p=t==null?void 0:t.user)==null?void 0:p.name}),s(E,{to:"/",onClick:o,children:"Logout"})]}):s("div",{className:L.navbar__logout,children:s(E,{to:"/auth",children:"Login"})})]})},st=()=>c("div",{children:[s(nt,{}),c(W,{children:[s(T,{path:"/",element:s(Ze,{})}),s(T,{path:"/auth",element:s(Fe,{})})]})]});function at(){return s("div",{className:"App",children:s(st,{})})}const ot=(e=[],t)=>{switch(t.type){case Y:return t.payload;case G:return e.filter(n=>n._id!==t.payload);case C:return e.map(n=>n._id===t.payload._id?t.payload:n);case j:return[...e,t.payload];default:return e}},it=JSON.parse(localStorage.getItem("profile")),rt=(e=it,t)=>{switch(t.type){case P:return localStorage.setItem("profile",JSON.stringify(t==null?void 0:t.data)),v(f({},e),{token:t.data.token,user:t.data.user});case be:return console.log("hello from logout"),localStorage.removeItem("profile"),v(f({},e),{token:null,user:null});default:return e}};var ct=X({posts:ot,auth:rt});const lt=Z(ct,I(ee(oe)));te.render(s(ne.StrictMode,{children:s(se,{children:s(ae,{store:lt,children:s(at,{})})})}),document.getElementById("root"));
