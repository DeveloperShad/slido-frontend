var G=Object.defineProperty,H=Object.defineProperties;var B=Object.getOwnPropertyDescriptors;var T=Object.getOwnPropertySymbols;var M=Object.prototype.hasOwnProperty,U=Object.prototype.propertyIsEnumerable;var $=(e,t,n)=>t in e?G(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,f=(e,t)=>{for(var n in t||(t={}))M.call(t,n)&&$(e,n,t[n]);if(T)for(var n of T(t))U.call(t,n)&&$(e,n,t[n]);return e},v=(e,t)=>H(e,B(t));import{a as J,r as h,u as N,b as L,j as l,c as s,g as F,F as K,d as w,e as R,h as z,f as I,o as Q,L as x,R as V,i as A,k as W,l as X,m as Z,n as ee,p as te,q as ne,B as se,P as oe,t as ae}from"./vendor.fa18889a.js";const ie=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))o(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const c of a.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&o(c)}).observe(document,{childList:!0,subtree:!0});function n(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerpolicy&&(a.referrerPolicy=i.referrerpolicy),i.crossorigin==="use-credentials"?a.credentials="include":i.crossorigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function o(i){if(i.ep)return;i.ep=!0;const a=n(i);fetch(i.href,a)}};ie();const re="_signin_1lxux_3",ce="_signin__title_1lxux_25",le="_signin__credential_cont_1lxux_51",_e="_signin__submit_1lxux_75",ue="_signin__google_login_btn_1lxux_95",de="_signin__switch_btn_1lxux_121";var k={signin:re,signin__title:ce,signin__credential_cont:le,signin__submit:_e,signin__google_login_btn:ue,signin__switch_btn:de};const b=J.create({baseURL:"https://slido-backend.herokuapp.com"});b.interceptors.request.use(e=>{const t=JSON.parse(localStorage.getItem("profile"));return t&&(e.headers.authorization=`Bearer ${t.token}`),e});const pe=()=>b.get("/posts"),ge=e=>b.post("/posts",e),me=(e,t)=>b.patch(`/posts/${e}`,t),he=e=>b.delete(`/posts/${e}`),fe=e=>b.patch(`/posts/${e}/likePost`),ve=e=>b.post("/users/signin",e),ye=e=>b.post("/users/signup",e),q="CREATE",C="UPDATE",Y="FETCH_ALL",j="DELETE",P="AUTH",be="LOGOUT",Ne=(e,t)=>async n=>{try{const{data:o}=await ve(e);n({type:P,data:o}),t("/")}catch(o){console.log(o)}},ke=(e,t)=>async n=>{try{const{data:o}=await ye(e);n({type:P,data:o}),t("/")}catch(o){console.log(o)}},we=({googleSuccess:e,googleFailure:t,setIsSignIn:n,isSignIn:o})=>{const i={email:"",password:""},[a,c]=h.exports.useState(i),p=N(),u=L(),d=r=>{r.preventDefault(),p(Ne(a,u))},_=r=>{const{name:g,value:m}=r.target;c(v(f({},a),{[g]:m}))};return l("div",{className:k.signin,children:[s("div",{className:k.signin__title,children:s("h2",{children:"Sign In"})}),l("form",{onSubmit:d,children:[l("div",{className:k.signin__credential_cont,children:[s("input",{type:"email",name:"email",onChange:_,value:a.email,placeholder:"Enter Your Email"}),s("input",{type:"password",name:"password",onChange:_,value:a.password,placeholder:"Enter Your Password"})]}),s("div",{className:k.signin__submit,children:s("input",{type:"submit",value:"Sign In"})})]}),s("div",{className:k.signin__google_login_btn,children:s(F.exports.GoogleLogin,{clientId:"163364189103-rtikmm99quj1c16o8qfuru4m016ilrn0.apps.googleusercontent.com",render:r=>l("button",{onClick:r.onClick,disabled:r.disabled,children:[s("i",{className:"fab fa-google"})," Google Login"]}),onSuccess:e,onFailure:t,cookiePolicy:"single_host_origin"})}),s("div",{className:k.signin__switch_btn,children:s("button",{onClick:()=>n(!o),children:o?"You don't have an account? Signup":"Already have an account? Login"})})]})},Se="_signup_1r1u2_3",xe="_signup__title_1r1u2_27",Ee="_signup__name_1r1u2_55",Le="_signup__email_1r1u2_75",Ce="_signup__password_1r1u2_91",Pe="_signup__image_file_1r1u2_109",Te="_signup__submit_1r1u2_123",$e="_signup__google_login_btn_1r1u2_139",Ae="_signup__switch_btn_1r1u2_165";var y={signup:Se,signup__title:xe,signup__name:Ee,signup__email:Le,signup__password:Ce,signup__image_file:Pe,signup__submit:Te,signup__google_login_btn:$e,signup__switch_btn:Ae};const Oe=({googleSuccess:e,googleFailure:t,setIsSignIn:n,isSignIn:o})=>{const i={first_name:"",last_name:"",email:"",password:"",confirm_password:"",selectedFile:""},[a,c]=h.exports.useState(i),p=N(),u=L(),d=r=>{r.preventDefault(),p(ke(a,u))},_=r=>{const{name:g,value:m}=r.target;c(v(f({},a),{[g]:m}))};return l("div",{className:y.signup,children:[s("div",{className:y.signup__title,children:s("h2",{children:"Sign Up"})}),l("form",{onSubmit:d,children:[l("div",{className:y.signup__name,children:[s("input",{type:"text",name:"first_name",onChange:_,value:a.first_name,placeholder:"Enter Your First Name"}),s("input",{type:"text",name:"last_name",onChange:_,value:a.last_name,placeholder:"Enter Your Last Name"})]}),s("div",{className:y.signup__email,children:s("input",{type:"email",name:"email",onChange:_,value:a.email,placeholder:"Enter Your Email"})}),l("div",{className:y.signup__password,children:[s("input",{type:"password",name:"password",onChange:_,value:a.password,placeholder:"Enter Your Password"}),s("input",{type:"password",name:"confirm_password",onChange:_,value:a.confirm_password,placeholder:"Confirm Password"})]}),s("div",{className:y.signup__image_file,children:s(K,{type:"file",multiple:!1,onDone:({base64:r})=>c(v(f({},a),{selectedFile:r}))})}),s("div",{className:y.signup__submit,children:s("input",{type:"submit",value:"Sign Up"})})]}),s("div",{className:y.signup__google_login_btn,children:s(F.exports.GoogleLogin,{clientId:"163364189103-rtikmm99quj1c16o8qfuru4m016ilrn0.apps.googleusercontent.com",render:r=>l("button",{onClick:r.onClick,disabled:r.disabled,children:[s("i",{className:"fab fa-google"})," Google Login"]}),onSuccess:e,onFailure:t,cookiePolicy:"single_host_origin"})}),s("div",{className:y.signup__switch_btn,children:s("button",{onClick:()=>n(!o),children:o?"You don't have an account? Signup":"Already have an account? Login"})})]})},De="_auth_dboim_3";var Fe={auth:De};const Re=()=>{const[e,t]=h.exports.useState(!1),n=N(),o=L(),i=async c=>{const p=c==null?void 0:c.profileObj,u=c==null?void 0:c.tokenId;try{n({type:"AUTH",data:{user:p,token:u}}),o("/")}catch(d){console.log(d)}},a=async c=>{console.log(c)};return s("div",{className:Fe.auth,children:e?s(we,{googleSuccess:i,googleFailure:a,setIsSignIn:t,isSignIn:e}):s(Oe,{googleSuccess:i,googleFailure:a,setIsSignIn:t,isSignIn:e})})},qe="_form_1skc0_3",Ye="_form__info_1skc0_73";var O={form:qe,form__info:Ye};const je=()=>async e=>{try{const{data:t}=await pe();e({type:Y,payload:t})}catch(t){console.log(t)}},Ge=e=>async t=>{try{const{data:n}=await ge(e);t({type:q,payload:n})}catch(n){console.log(n)}},He=(e,t)=>async n=>{try{const{data:o}=await me(e,t);n({type:C,payload:o})}catch(o){console.log(o)}},Be=e=>async t=>{try{await he(e),t({type:j,payload:e})}catch(n){console.log(n)}},D=e=>async t=>{try{const{data:n}=await fe(e);t({type:C,payload:n})}catch(n){console.log(n)}},Me=({currentId:e,setCurrentId:t})=>{var _;const n=w(r=>r.auth),o={message:"",tags:""},[i,a]=h.exports.useState(o),c=N(),p=w(r=>e?r.posts.find(g=>g._id===e):null);h.exports.useEffect(()=>{p&&a(p)},[p]);const u=r=>{let{name:g,value:m}=r.target;g=="tags"&&(m=m.split(",")),a(v(f({},i),{[g]:m}))},d=r=>{var g,m;r.preventDefault(),c(e?He(e,v(f({},i),{name:(g=n==null?void 0:n.user)==null?void 0:g.name})):Ge(v(f({},i),{name:(m=n==null?void 0:n.user)==null?void 0:m.name}))),a(o),t(null)};return s(R,{children:(_=n==null?void 0:n.user)!=null&&_.name?l("div",{className:O.form,children:[l("h2",{children:[" ",e?"Updating":"Creating"," a post"]}),l("form",{onSubmit:d,children:[s("input",{type:"text",name:"tags",placeholder:"Tags put , for multiple tags",value:i.tags,onChange:u}),s("textarea",{name:"message",placeholder:"Type your question here",cols:"10",rows:"10",value:i.message,onChange:u}),s("input",{type:"submit",value:"Submit"})]})]}):s("div",{className:O.form__info,children:s("p",{children:"Please Sign In to post your question and like others questions"})})})},Ue="_container_321jt_3";var Je={container:Ue};const Ke="_post_14ewn_3",ze="_post__more_14ewn_29";var S={post:Ke,post__more:ze};const Ie=({el:e,handleUpdate:t})=>{var a,c,p,u;const n=w(d=>d.auth),o=N(),i=()=>(e.likes.find(d=>{var _,r;return d!==((_=n==null?void 0:n.user)==null?void 0:_._id)||((r=n==null?void 0:n.user)==null?void 0:r.googleId)}),s(R,{children:e.likes.find(d=>{var _,r;return d===(((_=n==null?void 0:n.user)==null?void 0:_.googleId)||((r=n==null?void 0:n.user)==null?void 0:r._id))})?l("span",{onClick:()=>o(D(e._id)),children:[s("i",{className:"fas fa-thumbs-up"})," LIKE ",e.likes.length]}):l("span",{onClick:()=>o(D(e._id)),children:[s("i",{className:"far fa-thumbs-up"})," LIKE ",e.likes.length||""]})}));return l("div",{className:S.post,children:[l("div",{className:S.post__more,children:[s("p",{children:e.name}),s("p",{children:e.tags.map(d=>`#${d} `)}),s("p",{children:z(e.createdAt).fromNow()})]}),s("p",{children:e.message}),l("div",{className:S.post__more,children:[s(i,{}),(((a=n==null?void 0:n.user)==null?void 0:a.googleId)===(e==null?void 0:e.creator)||((c=n==null?void 0:n.user)==null?void 0:c._id)===(e==null?void 0:e.creator))&&l("span",{onClick:()=>o(Be(e._id)),children:[s("i",{className:"fas fa-trash"})," DELETE"]}),(((p=n==null?void 0:n.user)==null?void 0:p.googleId)===(e==null?void 0:e.creator)||((u=n==null?void 0:n.user)==null?void 0:u._id)===(e==null?void 0:e.creator))&&s("span",{className:S.post__image_right,children:s("i",{className:"fas fa-edit",onClick:()=>t(e._id)})})]})]})},Qe=({handleUpdate:e})=>{const t=w(o=>o.posts);console.log("posts",t);const n=N();return h.exports.useEffect(()=>{n(je()),console.log("from posts")},[]),t!=null&&t.length?s("div",{className:Je.container,children:t.map(o=>s(Ie,{el:o,handleUpdate:e},o._id))}):s("i",{className:"fas fa-spinner"})},Ve="_container_dpxx7_5";var We={container:Ve};const Xe=()=>{const[e,t]=h.exports.useState(null);function n(o){t(o)}return h.exports.useEffect(()=>{},[]),l("div",{className:We.container,children:[s(Qe,{handleUpdate:n}),s(Me,{currentId:e,setCurrentId:t})]})},Ze="_navbar_khdv1_3",et="_navbar__login_khdv1_33",tt="_navbar__logout_khdv1_83";var E={navbar:Ze,navbar__login:et,navbar__logout:tt};const nt=()=>{var c,p;const e=w(u=>u.auth),[t,n]=h.exports.useState(e);console.log("from navbar",t);const o=N(),i=I();h.exports.useEffect(()=>{const u=t==null?void 0:t.token;u&&Q(u).exp*1e3<new Date().getTime()&&a(),n(e)},[i]);const a=()=>{o({type:"LOGOUT"})};return l("div",{className:E.navbar,children:[s(x,{to:"/",children:s("h1",{children:"QnA"})}),t!=null&&t.token?l("div",{className:E.navbar__login,children:[s("img",{src:(c=t==null?void 0:t.user)==null?void 0:c.imageUrl,alt:t.user.name[0]}),s("p",{children:(p=t==null?void 0:t.user)==null?void 0:p.name}),s(x,{to:"/",onClick:a,children:"Logout"})]}):s("div",{className:E.navbar__logout,children:s(x,{to:"/auth",children:"Login"})})]})},st=()=>l("div",{children:[s(nt,{}),l(V,{children:[s(A,{path:"/",element:s(Xe,{})}),s(A,{path:"/auth",element:s(Re,{})})]})]});function ot(){return s("div",{className:"App",children:s(st,{})})}const at=(e=[],t)=>{switch(t.type){case Y:return t.payload;case j:return e.filter(n=>n._id!==t.payload);case C:return e.map(n=>n._id===t.payload._id?t.payload:n);case q:return[...e,t.payload];default:return e}},it=JSON.parse(localStorage.getItem("profile")),rt=(e=it,t)=>{switch(t.type){case P:return console.log("hello from red",t==null?void 0:t.data),localStorage.setItem("profile",JSON.stringify(t==null?void 0:t.data)),v(f({},e),{token:t.data.token,user:t.data.user});case be:return console.log("hello from logout"),localStorage.removeItem("profile"),v(f({},e),{token:null,user:null});default:return e}};var ct=W({posts:at,auth:rt});const lt=X(ct,Z(ee(ae)));te.render(s(ne.StrictMode,{children:s(se,{children:s(oe,{store:lt,children:s(ot,{})})})}),document.getElementById("root"));
